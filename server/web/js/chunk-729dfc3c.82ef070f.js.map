{"version":3,"sources":["webpack:///./src/views/race/Race.vue?f5ac","webpack:///./src/network/race.js","webpack:///src/views/race/Race.vue","webpack:///./src/views/race/Race.vue?550c","webpack:///./src/views/race/Race.vue","webpack:///./src/views/race/Race.vue?9496"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","on","pullingUp","_l","item","i","key","_id","style","currentNavIndex","color","$event","navClick","_v","_s","name","autoHeight","slideChange","desc","img","information","url","title","date","isSeeMore","isLoding","_e","staticRenderFns","getInformation","params","request","components","Card","Scroll","computed","scroll","$refs","raceScroll","data","pageNum","methods","raceSwiper","swiper","slideTo","information_list","length","finishPullUp","realIndex","created","component"],"mappings":"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","file":"js/chunk-729dfc3c.82ef070f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.information)?_c('scroll',{ref:\"raceScroll\",staticClass:\"scroll\",attrs:{\"scroll-x\":\"\",\"probe-type\":3,\"click\":\"\",\"pullUpLoad\":\"\"},on:{\"pullingUp\":_vm.pullingUp}},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"nav\"},[_c('ul',{staticClass:\"fs13\"},_vm._l((_vm.information),function(item,i){return _c('li',{key:item._id,style:(_vm.currentNavIndex===i?{'border-color':'#d59b40',color:'#d59b40'}:{}),on:{\"click\":function($event){return _vm.navClick(i)}}},[_vm._v(_vm._s(item.name))])}),0)]),_c('swiper',{ref:\"raceSwiper\",attrs:{\"options\":{autoHeight: true}},on:{\"slide-change\":_vm.slideChange}},_vm._l((_vm.information),function(item){return _c('swiper-slide',{key:item._id},[_c('div',{staticClass:\"race_content\"},[_c('p',[_c('span',{staticClass:\"race_title\"},[_vm._v(_vm._s(item.desc))]),_c('span',{staticClass:\"race_type fs12\"},[_vm._v(\"官方举办\")])]),_c('img',{attrs:{\"src\":item.img}}),_c('p',{staticClass:\"news\"},[_vm._v(\"赛事资讯\")]),_c('ul',{staticClass:\"information_list\"},_vm._l((item.information_list),function(information){return _c('li',{key:information._id},[_c('a',{attrs:{\"href\":information.url}},[_c('span',{staticClass:\"i_title t-ellipsis fs14 fc-3\"},[_vm._v(_vm._s(information.title))]),_c('span',{staticClass:\"i_time r\"},[_vm._v(_vm._s(information.date))])])])}),0),_c('h3',{staticClass:\"load-more t-center fs13\"},[_vm._v(_vm._s(_vm.isSeeMore?\"已显示全部内容\":_vm.isLoding?\"加载中...\":\"上拉加载更多\"))])])])}),1)],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { request } from './request'\r\n\r\nfunction getInformation(params) {\r\n  return request({\r\n    url: '/race/information',\r\n    params\r\n  })\r\n}\r\n\r\nexport {\r\n  getInformation\r\n}","<template>\r\n  <div>\r\n    <scroll\r\n      v-if=\"information\"\r\n      class=\"scroll\"\r\n      scroll-x\r\n      :probe-type=\"3\"\r\n      click\r\n      pullUpLoad\r\n      ref=\"raceScroll\"\r\n      @pullingUp=\"pullingUp\"\r\n    >\r\n      <div class=\"container\">\r\n        <div class=\"nav\">\r\n          <ul class=\"fs13\">\r\n            <li\r\n              :style=\"currentNavIndex===i?{'border-color':'#d59b40',color:'#d59b40'}:{}\"\r\n              v-for=\"(item,i) in information\"\r\n              :key=\"item._id\"\r\n              @click=\"navClick(i)\"\r\n            >{{item.name}}</li>\r\n          </ul>\r\n        </div>\r\n        <swiper :options=\"{autoHeight: true}\" ref=\"raceSwiper\" @slide-change=\"slideChange\">\r\n          <swiper-slide v-for=\"item in information\" :key=\"item._id\">\r\n            <div class=\"race_content\">\r\n              <p>\r\n                <span class=\"race_title\">{{item.desc}}</span>\r\n                <span class=\"race_type fs12\">官方举办</span>\r\n              </p>\r\n              <img :src=\"item.img\" />\r\n              <p class=\"news\">赛事资讯</p>\r\n              <ul class=\"information_list\">\r\n                <li v-for=\"information in item.information_list\" :key=\"information._id\">\r\n                  <a :href=\"information.url\">\r\n                    <span class=\"i_title t-ellipsis fs14 fc-3\">{{information.title}}</span>\r\n                    <span class=\"i_time r\">{{information.date}}</span>\r\n                  </a>\r\n                </li>\r\n              </ul>\r\n              <h3 class=\"load-more t-center fs13\">{{isSeeMore?\"已显示全部内容\":isLoding?\"加载中...\":\"上拉加载更多\"}}</h3>\r\n            </div>\r\n          </swiper-slide>\r\n        </swiper>\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nimport { getInformation } from 'network/race'\r\n\r\nimport Card from 'components/content/Card'\r\nimport Scroll from '../../components/common/scroll/Scroll'\r\n\r\nexport default {\r\n  name: \"Race\",\r\n  components: {\r\n    Card,\r\n    Scroll\r\n  },\r\n  computed: {\r\n    scroll() {\r\n      return this.$refs.raceScroll.scroll\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      information: null,\r\n      currentNavIndex: 0,\r\n      pageNum: 1,\r\n      isSeeMore: false,\r\n      isLoding: false\r\n    }\r\n  },\r\n  methods: {\r\n    async getInformation() {\r\n      const res = await getInformation()\r\n      if (!res) return\r\n      this.information = res.data\r\n      // console.log(res.data);\r\n    },\r\n    navClick(i) {\r\n      this.$refs.raceSwiper.swiper.slideTo(i)\r\n      this.currentNavIndex = i\r\n      if (this.information[this.currentNavIndex].information_list.length > 50) {\r\n        this.pageNum = 5\r\n        this.isSeeMore = false\r\n      } else if (this.information[this.currentNavIndex].information_list.length <= 50 && this.information[this.currentNavIndex].information_list.length > 40) {\r\n        this.pageNum = 4\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n      else if (this.information[this.currentNavIndex].information_list.length <= 30 && this.information[this.currentNavIndex].information_list.length > 20) {\r\n        this.pageNum = 3\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n      else if (this.information[this.currentNavIndex].information_list.length <= 20 && this.information[this.currentNavIndex].information_list.length > 10) {\r\n        this.pageNum = 2\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      } else {\r\n        this.pageNum = 1\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n    },\r\n    slideChange() {\r\n      this.currentNavIndex = this.$refs.raceSwiper.swiper.realIndex\r\n      if (this.information[this.currentNavIndex].information_list.length > 50) {\r\n        this.pageNum = 5\r\n        this.isSeeMore = false\r\n      } else if (this.information[this.currentNavIndex].information_list.length <= 50 && this.information[this.currentNavIndex].information_list.length > 40) {\r\n        this.pageNum = 4\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n      else if (this.information[this.currentNavIndex].information_list.length <= 30 && this.information[this.currentNavIndex].information_list.length > 20) {\r\n        this.pageNum = 3\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n      else if (this.information[this.currentNavIndex].information_list.length <= 20 && this.information[this.currentNavIndex].information_list.length > 10) {\r\n        this.pageNum = 2\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      } else {\r\n        this.pageNum = 1\r\n        this.isSeeMore = false\r\n        this.scroll.finishPullUp()\r\n      }\r\n    },\r\n    async pullingUp() {\r\n      this.scroll.refresh()\r\n      this.isLoding = true\r\n      const res = await getInformation({\r\n        id: this.information[this.currentNavIndex]._id,\r\n        pageNum: this.pageNum\r\n      })\r\n      this.isLoding = false\r\n      // return\r\n      // 如果拿到结果则让页数＋1，并重启下拉加载事件\r\n      // 如果服务器出现错误，则重启下拉加载事件\r\n      // 如果没有更多数据或页数等于3时，则终止下拉加载\r\n      if (!res) return this.scroll.finishPullUp()\r\n      if (res.data.length === 0) return this.isSeeMore = true\r\n\r\n      this.information[this.currentNavIndex].information_list.push(...res.data)\r\n      this.scroll.refresh()\r\n      this.scroll.finishPullUp()\r\n\r\n      this.pageNum++\r\n    }\r\n  },\r\n  created() {\r\n    this.getInformation()\r\n  }\r\n}\r\n</script>\r\n \r\n<style lang=\"scss\" scoped>\r\n.scroll {\r\n  height: calc(100vh - 3.48rem);\r\n  overflow: hidden;\r\n}\r\n.container {\r\n  background-color: #f1f1f1;\r\n  .nav {\r\n    width: 100%;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n    ul {\r\n      height: 1.792rem;\r\n      padding: 0 0.4rem;\r\n      line-height: 1.672rem;\r\n      white-space: nowrap;\r\n      li {\r\n        display: inline-block;\r\n        margin-right: 1.2rem;\r\n        border-bottom: 0.12rem solid transparent;\r\n      }\r\n    }\r\n  }\r\n  .race_content {\r\n    p {\r\n      width: 100%;\r\n      padding: 0 0.35rem;\r\n      margin-top: 0.6rem;\r\n      .race_title {\r\n        font-size: 0.7rem;\r\n        font-weight: bold;\r\n        color: #00adff;\r\n      }\r\n      .race_type {\r\n        padding: 0.5% 2%;\r\n        margin-left: 4%;\r\n        border: 0.04rem solid #a2a2a2;\r\n        border-radius: 2rem;\r\n        color: #a2a2a2;\r\n      }\r\n    }\r\n    img {\r\n      width: 100%;\r\n      height: 8.4rem;\r\n      margin-top: 0.56rem;\r\n      vertical-align: middle;\r\n    }\r\n    .news {\r\n      text-align: center;\r\n      height: 1.14rem;\r\n      line-height: 1.14rem;\r\n      margin: 0.3732rem 0;\r\n      color: #a2a2a2;\r\n      background: #e4e4e4;\r\n    }\r\n    .information_list {\r\n      width: 100%;\r\n      padding: 0 0.28rem;\r\n      li {\r\n        a {\r\n          display: block;\r\n          width: 100%;\r\n          height: 1.232rem;\r\n          line-height: 1.232rem;\r\n          .i_title {\r\n            display: inline-block;\r\n            width: 85%;\r\n          }\r\n          .i_time {\r\n            color: #9e9e9e;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .load-more {\r\n      height: 1.3rem;\r\n      margin: 0 0.28rem 0.4rem;\r\n      background-color: #e6e6e6;\r\n      border-radius: 0.56rem;\r\n      line-height: 1.3rem;\r\n      color: #858587;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Race.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Race.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Race.vue?vue&type=template&id=0a188f6a&scoped=true&\"\nimport script from \"./Race.vue?vue&type=script&lang=js&\"\nexport * from \"./Race.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Race.vue?vue&type=style&index=0&id=0a188f6a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a188f6a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Race.vue?vue&type=style&index=0&id=0a188f6a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Race.vue?vue&type=style&index=0&id=0a188f6a&lang=scss&scoped=true&\""],"sourceRoot":""}